<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="layoutTemplate/template :: layout(~{::title}, ~{::main})">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link th:href="@{/css/bootstrap.min.css}" href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link th:href="@{/css/dalsom.css}" href="/static/css/dalsom.css" rel="stylesheet" type="text/css">
    <script defer th:src="@{/js/bootstrap.bundle.min.js}" src="/static/js/bootstrap.bundle.min.js"></script>
    <title>달콤한 솜사탕</title>
</head>
<body>
<div class="container-fluid wrapper row">
    <aside class="flex-shrink-0 p-4 align-items-center cotton-color col-2 sidebar">
        <a href="#" class="d-flex align-items-center pb-3 mb-3 text-decoration-none border-bottom">
            <span class="fs-5 fw-semibold text-black">관리자 메인</span>
        </a>
        <ul class="list-unstyled ps-0">
            <li class="mb-1">
                <button class="btn align-items-center rounded btn-toggle" data-bs-toggle="collapse"
                        data-bs-target="#guild-collapse" aria-expanded="true">길드관리
                </button>
                <div class="collapse" id="guild-collapse">
                    <ul class="list-unstyled fw-normal pb-1 small btn-toggle-nav">
                        <li>
                            <a href="#" class="link-dark rounded">길드현황</a>
                        </li>
                        <li>
                            <a href="#" class="link-dark rounded">건의사항</a>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="mb-1">
                <button class="btn align-items-center rounded btn-toggle" data-bs-toggle="collapse"
                        data-bs-target="#user-collapse" aria-expanded="true">회원관리
                </button>
                <div class="collapse" id="user-collapse">
                    <ul class="list-unstyled fw-normal pb-1 small btn-toggle-nav">
                        <li>
                            <a href="#" class="link-dark rounded">회원목록</a>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="mb-1">
                <button class="btn align-items-center rounded btn-toggle" data-bs-toggle="collapse"
                        data-bs-target="#admin-collapse" aria-expanded="true">운영진관리
                </button>
                <div class="collapse" id="admin-collapse">
                    <ul class="list-unstyled fw-normal pb-1 small btn-toggle-nav">
                        <li>
                            <a href="#" class="link-dark rounded">운영진목록</a>
                        </li>
                        <li>
                            <a href="#" class="link-dark rounded">운영진가입승인</a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </aside>
    <main class="text-center col-10 overflow-auto">
        <div class="row p-5">
            <div class="col-6">
                <div class="left-head row p-1 ms-5 me-5">
                    <h1>
                        Howler
                    </h1>
                    <hr>
                </div>
                <div class="text-start ps-5 pe-5 pt-3">
                    <div class="row justify-content-between mb-3  pt-2 pb-2">
                        <div class="col-auto">
                            <p class="fw-semibold fs-4 mt-auto mb-auto">
                                <span>가입일 : </span>
                                <span id="joinDateSpan">2020-01-01</span>
                            </p>
                            <input class="form-control hide" type="date" id="joinDateInput" value="2020-01-01">
                        </div>
                        <div class="col-auto ps-0 pe-0">
                            <button class="btn btn-sm btn-light user-detail-btn" id="modifyJoinDateButton"> 수정
                            </button>
                        </div>
                    </div>
                    <div class="row justify-content-between mb-3  pt-2 pb-2">
                        <div class="col-auto" style="display: table">
                            <p class="fw-semibold fs-4 mt-auto mb-auto"
                               style="display: table-cell; vertical-align: middle">코멘트 수 :
                                <a href="#" class="text-decoration-none">0</a>
                            </p>
                        </div>
                        <div class="col-auto ps-0 pe-0">
                            <button class="btn btn-sm btn-light col-auto user-detail-btn"
                                    data-bs-target="#commentModal"
                                    data-bs-toggle="modal">
                                코멘트<br> 남기기
                            </button>
                        </div>
                    </div>
                    <div class="row justify-content-between mb-3  pt-2 pb-2">
                        <div class="col-auto">
                            <p class="fw-semibold fs-4 mt-auto mb-auto">사사게 수 : 0</p>
                        </div>
                        <div class="col-auto ps-0 pe-0">
                            <button class="btn btn-sm btn-light user-detail-btn">새로고침</button>
                        </div>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="contentModalTitle">코멘트 남기기</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="mb-2">
                                        <select class="form-select text-center" name="commentCategory"
                                                id="commentCategory">
                                            <option value="remark">비고</option>
                                            <option value="warn">경고</option>
                                        </select>
                                    </div>
                                    <textarea class="form-control" name="test" id="commentTextArea"
                                              rows="10"></textarea>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                                    <button type="button" class="btn btn-primary">저장</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal -->

                    <div>
                        <hr>
                        <p class="display-6 fw-semibold text-danger">탈퇴 관리</p>
                        <button class="btn btn-primary" data-bs-target="#leaveModal" data-bs-toggle="modal"
                                data-bs-whatever="탈퇴">자진 탈퇴
                        </button>
                        <button class="btn btn-danger" data-bs-target="#leaveModal" data-bs-toggle="modal"
                                data-bs-whatever="추방">추방
                        </button>

                        <!-- Modal -->
                        <div class="modal fade" id="leaveModal" tabindex="-1" aria-labelledby="leaveModalLabel"
                             aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="leaveModalTitle">탈퇴</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="mb-2">
                                            <span id="leaveModalBodyTitle">탈퇴 사유</span>
                                        </div>
                                        <textarea class="form-control mb-3" name="leaveReasonTextArea"
                                                  id="leaveReasonTextArea" rows="10"></textarea>
                                        <input class="form-control" type="date">
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소
                                        </button>
                                        <button type="button" class="btn btn-primary">저장</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal -->
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="row p-1 ms-5 me-5">
                    <h1>보유 캐릭터 정보 <span class="text-end fs-4 text-muted">7</span></h1>
                    <hr>
                </div>
                <div class="row mt-0">
                    <div class="card col-auto m-3">
                        <div class="card-body">
                            <figure>
                                <h5 class="card-title mb-0">
                                    Howler
                                </h5>
                                <figcaption class="figure-caption">달콤한솜사탕</figcaption>
                            </figure>
                            <h6 class="card-subtitle text-muted mb-2">데빌헌터</h6>
                            <p class="card-text">
                                <span>아이템 레벨 : 1595 </span>
                            </p>
                            <a href="https://loawa.com/char/Howler" class="text-decoration-none m-1" target="_blank"
                               rel="noopener noreferrer">캐릭터 정보<br>(로아와)</a>
                        </div>
                    </div>
                    <div class="card col-auto m-3">
                        <div class="card-body">
                            <figure>
                                <h5 class="card-title mb-0">
                                    Weeper
                                </h5>
                                <figcaption class="figure-caption">새콤한솜사탕</figcaption>
                            </figure>
                            <h6 class="card-subtitle text-muted mb-2">데빌헌터</h6>
                            <p class="card-text">
                                <span>아이템 레벨 : 1509 </span>
                            </p>
                            <a href="#" class="text-decoration-none m-1">캐릭터 정보<br>(로아와)</a>
                        </div>
                    </div>
                    <div class="card col-auto m-3">
                        <div class="card-body">
                            <figure>
                                <h5 class="card-title mb-0">
                                    Midir
                                </h5>
                                <figcaption class="figure-caption">타길드</figcaption>
                            </figure>
                            <h6 class="card-subtitle text-muted mb-2">데빌헌터</h6>
                            <p class="card-text">
                                <span>아이템 레벨 : 1477 </span>
                            </p>
                            <a href="#" class="text-decoration-none m-1">캐릭터 정보<br>(로아와)</a>
                        </div>
                    </div>
                    <div class="card col-auto m-3">
                        <div class="card-body">
                            <figure>
                                <h5 class="card-title mb-0">
                                    SpentaMainyu
                                </h5>
                            </figure>
                            <h6 class="card-subtitle text-muted mb-2">바드</h6>
                            <p class="card-text">
                                <span>아이템 레벨 : 1475 </span>
                            </p>
                            <a href="#" class="text-decoration-none m-1">캐릭터 정보<br>(로아와)</a>
                        </div>
                    </div>
                    <div class="card col-auto m-3">
                        <div class="card-body">
                            <figure>
                                <h5 class="card-title mb-0">
                                    Sachael
                                </h5>
                            </figure>
                            <h6 class="card-subtitle text-muted mb-2">호크아이</h6>
                            <p class="card-text">
                                <span>아이템 레벨 : 1475 </span>
                            </p>
                            <a href="#" class="text-decoration-none m-1">캐릭터 정보<br>(로아와)</a>
                        </div>
                    </div>
                    <div class="card col-auto m-3">
                        <div class="card-body">
                            <figure>
                                <h5 class="card-title mb-0">
                                    TheWanderer
                                </h5>
                            </figure>
                            <h6 class="card-subtitle text-muted mb-2">홀리나이트</h6>
                            <p class="card-text">
                                <span>아이템 레벨 : 1475 </span>
                            </p>
                            <a href="#" class="text-decoration-none m-1">캐릭터 정보<br>(로아와)</a>
                        </div>
                    </div>
                    <div class="card col-auto m-3">
                        <div class="card-body">
                            <figure>
                                <h5 class="card-title mb-0">
                                    Josephineana
                                </h5>
                            </figure>
                            <h6 class="card-subtitle text-muted mb-2">도화가</h6>
                            <p class="card-text">
                                <span>아이템 레벨 : 1460 </span>
                            </p>
                            <a href="#" class="text-decoration-none m-1">캐릭터 정보<br>(로아와)</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
<script>
    document.getElementById("modifyJoinDateButton").addEventListener("click", () => {
        let dateInput = document.getElementById("joinDateInput");
        let dateSpan = document.getElementById("joinDateSpan");

        if (dateInput.classList.contains("hide")) {
            dateInput.classList.remove("hide");
            dateSpan.parentElement.classList.add("hide");
        } else {
            //do ajax to server
            dateSpan.innerText = dateInput.value;
            dateInput.classList.add("hide");
            dateSpan.parentElement.classList.remove("hide");
        }
    })

    let modal = document.getElementById("leaveModal");
    modal.addEventListener('show.bs.modal', (event) => {
        setDateValue(modal);

        let relatedTarget = event.relatedTarget;
        let attribute = relatedTarget.getAttribute("data-bs-whatever");

        let title = modal.querySelector("#leaveModalTitle");
        title.innerHTML = attribute;
        let body = modal.querySelector("#leaveModalBodyTitle");
        body.innerHTML = `${attribute} 사유`;
    });
</script>
</body>
</html>